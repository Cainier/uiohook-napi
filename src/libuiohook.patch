diff --git a/src/x11/input_hook.c b/src/x11/input_hook.c
index cd1037f..b1658b1 100644
--- a/src/x11/input_hook.c
+++ b/src/x11/input_hook.c
@@ -30,8 +30,11 @@
 #include <stdint.h>
 #include <uiohook.h>
 
+#ifdef USE_XKBCOMMON
 #include <xcb/xkb.h>
+#else
 #include <X11/XKBlib.h>
+#endif
 
 #include <X11/keysym.h>
 #include <X11/Xlibint.h>
